<%- include('../partials/header') %>
<% for (let i = 0; i < user.length; i++) { %>
    <div class="container col-md-10">
        <% if(typeof message != "undefined" && message) { %>
            <div class="alert alert-warning alert-dismissible fade show mt-3" role="alert">
                <strong> <%= message %> </strong>
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
              </div>
          <% } %>
            <%- include('../partials/dropdown') %>
        <% if(goal != 0) { %>
        <% goal.forEach(goal => { %>
            <div class="card border border-secondary rounded-3 my-4 shadow">
                <div class="card-body mx-3 my-3">
                    <div class="card-title ">
                        <div class="d-flex justify-content-between">
                        <h4><%= goal.title %></h4>
                        </div>
                        <h6 class="mb-3 text-muted"> <%= goal.category %> plan</h6>
                    </div>
                    <div class="card-subtitle mb-3">
                        <%= goal.startDate %> - <%= goal.endDate %>
                    </div>
                    <div class="card-text mb-2">
                        <%= goal.description %>
                    </div>
                    
                    <div class="d-flex justify-content-end cardlinks mt-4">
                        <% for (let i = 0; i < done.length; i++) { %>
                                <% if(done[i].goal_id != goal.id){ %>
                                    <a href="/goals/edit/<%= user[i].id %>/<%= goal.id %>" class="ms-3 d-none d-lg-block">Edit</a>
                            <% } else { %>
                                <h5 class="text-danger">Completed</h5>
                                <% } %>
                            
                                <a href="/goals/edit/<%= user[i].id %>/<%= goal.id %>" class="ms-3 d-none d-lg-block">Edit</a>
                            
                        <a href="/goals/overview/<%= user[i].id %>/<%= goal.id %>" class="ms-3">Preview</a>
                        <a href="/goals/delgoal/<%= user[i].id %>/<%= goal.id %>" class="ms-3">Delete</a>
                        
                        </div> 
                </div> 
            </div> 
       <% }) %>
       <% } else { %>
        <div class="card border border-secondary rounded-3 mt-4 shadow">
            <div class="card-body mx-2">
                <h4 class="card-title mt-2">Congratulations!! </h4>
                <div class="card-body mb-3">
                    Welcome to FIVE, your goal planner that helps you achieve those goals. <br> 
                    <p class="my-2">FIVE planner is simple and easy with features such as:</p>
                    <ul class="ads my-3" style="list-style-type:none;">
                        <li class="mb-1"> <i class='fas fa-question-circle me-1'></i> Tips: This provides tips on to allow you set SMART goals.</li>
                        <li class="mb-1"> <i class='fas fa-envelope me-1'></i> Reminders: Get weekly emails until your due date.</li>
                        <li class="mb-1"> <i class='fas fa-chart-line me-1'></i> Tracking: Keep track of your progress.</li>
                        <li class="mb-1"> <i class='fas fa-print me-1'></i> Print: You can get your plan in hard copy.</li>
                    </ul>
                    FIVE allows you set both long and short term goals so go ahead, click the <i>"New goal"</i> button.<br class="mb-3">
                    <div class="mt-3">This was an important decision, many more to come!</div>
                </div>
            </div>  
        </div> 
      <% } }%>
    </div>

<%- include('../partials/footer') %>
